function hasPointerDevice(){return window.matchMedia&&window.matchMedia("(pointer: fine)").matches}function loadScript(e){return new Promise((t,n)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=t,i.onerror=()=>n(new Error(`Failed to load script: ${e}`)),document.head.appendChild(i)})}document.addEventListener("DOMContentLoaded",function(){if(!hasPointerDevice()||window.innerWidth<768)return;let e=document.documentElement.scrollTop,t=!1;function n(){const n=document.documentElement.scrollTop,i=n-e,o=document.getElementById("J_header");o&&(o.className=i>0&&n>0?"header-menu header-menu-overflow":"header-menu"),e=n,t=!1}document.addEventListener("scroll",function(){t||(requestAnimationFrame(n),t=!0)},{passive:!0});const i=window.innerWidth,o=document.getElementById("J_firework_canvas");if(!o)return;o.width=i,o.height=260;const c=o.getContext("2d");if(!c)return;const r=[],s={x:0,y:9999};let d=null;function a(e,t,n,i,s){this.x=e,this.y=t,this.width=i,this.color=s,this.alpha=Math.random()-.1,this.speed=n,this.active=!0,this.physx=function(){this.y+=this.speed,this.y>o.height&&this.kill()},this.kill=function(){r.splice(r.indexOf(this),1),this.active=!1},this.draw=function(){c.beginPath(),c.arc(this.x,this.y,this.width,0,2*Math.PI,!0),c.fillStyle=this.color,c.lineWidth=this.width,c.save(),c.globalAlpha=this.alpha,c.fill(),c.restore()}}function h(){c.clearRect(0,0,o.width,o.height);for(let e=0;e<5;e++){const e=s.x+10*Math.random(),t=s.y+10*Math.random();r.push(new a(e,t,1+2*Math.random(),5,"white"))}for(let e=r.length-1;e>=0;e--){const t=r[e];t.active?(t.draw(),t.physx()):r.splice(e,1)}d=requestAnimationFrame(h)}function l(){d||h()}l(),document.addEventListener("visibilitychange",()=>{document.hidden?d&&(cancelAnimationFrame(d),d=null):l()}),document.addEventListener("mousemove",e=>{s.x=e.pageX,s.y=e.pageY},{passive:!0}),document.addEventListener("mouseleave",()=>{s.x=0,s.y=9999});const m=document.getElementById("J_qr_text");m&&m.offsetParent&&loadScript("https://gw.alipayobjects.com/os/k/qa/qrcode.min.js").then(()=>{if(window.QRCode){const e=document.getElementById("J_qr_code");e&&new QRCode(e,{width:128,height:128,useSVG:!0,text:window.location.href,correctLevel:QRCode.CorrectLevel.L})}}).catch(console.error);const u=document.querySelectorAll(".entry-content img");u.length>0&&loadScript("https://gw.alipayobjects.com/os/k/x5/intense.min.js").then(()=>{window.Intense&&Intense(u)}).catch(console.error)},!1);