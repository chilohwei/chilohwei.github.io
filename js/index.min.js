function hasPointerDevice(){return window.matchMedia&&window.matchMedia("(pointer: fine)").matches}function loadScript(i){return new Promise((e,t)=>{var n;document.querySelector(`script[src="${i}"]`)?e():((n=document.createElement("script")).type="text/javascript",n.async=!0,n.src=i,n.onload=e,n.onerror=()=>t(new Error("Failed to load script: "+i)),document.head.appendChild(n))})}document.addEventListener("DOMContentLoaded",function(){if(hasPointerDevice()&&!(window.innerWidth<768)){let i=document.documentElement.scrollTop,o=!1;document.addEventListener("scroll",function(){o||(requestAnimationFrame(e),o=!0)},{passive:!0});var t=window.innerWidth;let c=document.getElementById("J_firework_canvas");if(c){c.width=t,c.height=260;let a=c.getContext("2d");if(a){let r=[],o={x:0,y:9999};!function e(){a.clearRect(0,0,c.width,c.height);for(let e=0;e<5;e++){var t=o.x+10*Math.random(),n=o.y+10*Math.random();r.push(new d(t,n,1+2*Math.random(),5,"white"))}for(let e=r.length-1;0<=e;e--){var i=r[e];i.active?(i.draw(),i.physx()):r.splice(e,1)}requestAnimationFrame(e)}(),document.addEventListener("mousemove",e=>{o.x=e.pageX,o.y=e.pageY},{passive:!0}),document.addEventListener("mouseleave",()=>{o.x=0,o.y=9999});t=document.getElementById("J_qr_text");t&&t.offsetParent&&loadScript("https://gw.alipayobjects.com/os/k/qa/qrcode.min.js").then(()=>{var e;window.QRCode&&(e=document.getElementById("J_qr_code"))&&new QRCode(e,{width:128,height:128,useSVG:!0,text:window.location.href,correctLevel:QRCode.CorrectLevel.L})}).catch(console.error);let e=document.querySelectorAll(".entry-content img:not(.qr-payment-img)");function d(e,t,n,i,o){this.x=e,this.y=t,this.width=i,this.color=o,this.alpha=Math.random()-.1,this.speed=n,this.active=!0,this.physx=function(){this.y+=this.speed,this.y>c.height&&this.kill()},this.kill=function(){r.splice(r.indexOf(this),1),this.active=!1},this.draw=function(){a.beginPath(),a.arc(this.x,this.y,this.width,0,2*Math.PI,!0),a.fillStyle=this.color,a.lineWidth=this.width,a.save(),a.globalAlpha=this.alpha,a.fill(),a.restore()}}0<e.length&&loadScript("https://gw.alipayobjects.com/os/k/x5/intense.min.js").then(()=>{window.Intense&&Intense(e)}).catch(console.error)}}function e(){var e=document.documentElement.scrollTop,t=e-i,n=document.getElementById("J_header");n&&(n.className=0<t&&0<e?"header-menu header-menu-overflow":"header-menu"),i=e,o=!1}}},!1);
